<title>BIAB</title>
<div id="browser">
  <div id="url-bar">
    <input type="text" placeholder="Enter URL (Must start with https://)" id="url-input">
    <button onclick="URLenterd();">Open</button>
  </div>
  <div id="tabs">
    <div class="tab" id="tab1">Tab 1</div>
    <div class="tab" id="tab2">Tab 2</div>
    <div class="tab" id="tab3">Tab 3</div>
  </div>
  <div id="tab-content">
    <iframe src="about:blank" id="iframe1"></iframe>
    <iframe src="about:blank" id="iframe2"></iframe>
    <iframe src="about:blank" id="iframe3"></iframe>
  </div>
</div>
<style>
  #browser {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  background-color: #ddd;
}

#url-bar {
  background-color: #fff;
  border-bottom: 1px solid #ddd;
  display: flex;
  align-items: center;
  padding: 10px;
}

#url-input {
  width: 100%;
  height: 40px;
  border: none;
  outline: none;
  font-size: 16px;
  padding-left: 10px;
}

#tabs {
  background-color: #fff;
  border-bottom: 1px solid #ddd;
  display: flex;
  align-items: center;
  padding: 10px;
}

.tab {
  background-color: #ddd;
  color: #333;
  padding: 10px 20px;
  border-radius: 5px 5px 0 0;
  margin-right: 10px;
  cursor: pointer;
}

.tab.active {
  background-color: #fff;
  color: #333;
}

#tab-content {
  width: 100%;
  height: calc(100% - 60px);
}

iframe {
  width: 100%;
  height: 100%;
  border: none;
}

</style>
<script>
  const tabsContainer = document.querySelector('#tabs');
const tabContent = document.querySelector('#tab-content');
const urlInput = document.querySelector('#url-input');

let tabs = Array.from(document.querySelectorAll('.tab'));
let iframes = Array.from(document.querySelectorAll('iframe'));

// Show the first tab and hide the rest
tabs[0].classList.add('active');
iframes.forEach((iframe, index) => {
  if (index !== 0) {
    iframe.style.display = 'none';
  }
});

// Handle tab clicks
tabs.forEach((tab, index) => {
  tab.addEventListener('click', () => {
    tabs.forEach(tab => {
      tab.classList.remove('active');
    });
    tab.classList.add('active');
    iframes.forEach((iframe, i) => {
      if (index === i) {
        iframe.style.display = 'block';
      } else {
        iframe.style.display = 'none';
      }
    });
  });
});

// Handle the creation of new tabs
const newTabButton = document.createElement('div');
newTabButton.classList.add('tab');
newTabButton.textContent = '+';
tabsContainer.appendChild(newTabButton);
newTabButton.addEventListener('click', () => {
  // Create new tab
  const newTab = document.createElement('div');
  newTab.classList.add('tab');
  newTab.textContent = 'New Tab';
  tabsContainer.insertBefore(newTab, newTabButton);
  tabs.push(newTab);

  // Create new iframe
  const newIframe = document.createElement('iframe');
  newIframe.src = 'about:blank';
  newIframe.id = "iframe" + iframes
  newIframe.style.display = 'none';
  tabContent.appendChild(newIframe);
  iframes.push(newIframe);

  // Show the new tab and hide the rest
  newTab.classList.add('active');
  tabs.forEach((tab, index) => {
    if (tab !== newTab) {
      tab.classList.remove('active');
    }
  });
  iframes.forEach((iframe, index) => {
    if (iframe !== newIframe) {
      iframe.style.display = 'none';
    }
  });

  // Handle new tab clicks
  newTab.addEventListener('click', () => {
    tabs.forEach(tab => {
      tab.classList.remove('active');
    });
    newTab.classList.add('active');
    iframes.forEach((iframe, index) => {
      if (iframes[index] === newIframe) {
        iframe.style.display = 'block';
      } else {
        iframe.style.display = 'none';
      }
    });
  });
});

// Handle the closing of tabs
tabs.forEach(tab, index); {
  tab.addEventListener('dblclick', () => {
    // Remove the tab and iframe
    tab.remove();
    iframes[index].remove();

    // Update the arrays
    tabs.splice(index, 1);
    iframes.splice(index, 1);

    // Show the first tab if there are no more tabs
    if (tabs.length === 0) {
      tabs[0].classList.add('active');
      iframes[0].style.display = 'block';
    } else {
      // Show the next tab if the tab that was closed was active
      if (tab.classList.contains('active')) {
        let nextTab = tabs[index];
        if (!nextTab) {
          nextTab = tabs[index - 1];
        }
        nextTab.classList.add('active');
        iframes[tabs.indexOf(nextTab)].style.display = 'block';
      }
    }
  });
};

// Handle URL navigation
urlInput.addEventListener('keydown', event => {
  if (event.key == 'Enter') {
    let activeTab = tabs.find(tab => tab.classList.contains('active'));
    let activeIframe = iframes[tabs.indexOf(activeTab)];
    activeIframe.src = urlInput.value;
    urlInput.value = "https://";
  }
});

function URLenterd() {
    let activeTab = tabs.find(tab => tab.classList.contains('active'));
    let activeIframe = iframes[tabs.indexOf(activeTab)];
    activeIframe.src = urlInput.value;
    urlInput.value = "https://";
  }
</script>
